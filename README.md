# Набор контейнеров для добровольцев проекта DPIdetector.org

*В данный момент проект находится в стадии бета-тестирования*

Для того чтобы участвовать в тестировании Вам нужно зарегистрироваться на [сайте
DPIdetector](https://dpidetector.org/ru/request-token/), и подождать, пока модераторы одобрят вашу заявку,
после чего Вам будет отправлен "токен" (Ваш уникальный секретный идентификатор),
который Вы сможете использовать для входа в dashboard (информационную панель), а так же для конфигурации своего
диагностического узла.

После чего Вам нужно:
1) Клонировать данный репозиторий на то устройство, где Вы планируете поднимать диагностический узел.
Предположительно, команда будет выглядеть как-то так:
```
git clone https://github.com/DPIdetector/dpidetector-node
```
2) Совершить следующие действия:
   1. Перейти в [панель управления вашими узлами и просмотра статистики](https://dpidetector.org/dashboard/)
   2. Войти, используя полученный ранее токен
   3. Перейти на вкладку "Ноды"
   4. Нажать "Добавить ноду"
   5. Заполнить все поля во всплывшем окошке и нажать "Добавить"
   6. Нажать кнопку "Скачать" в столбике "Конфигурация" и сохранить файл который скачается (имя файла должно быть
`user.conf`) в директорию скачанного на предыдущем шаге репозитория.

Для справки, структура файла такова, что в нём ожидается наличие двух переменных:
- `token` (в качестве значения должен быть полученный Вами при регистрации токен),
- `node_id` (в качестве значения должно быть указано значение из поля "UID", относящееся к созданному Вами чуть ранее узлу)

Содержимое файла должно выглядеть примерно так (с поправкой на значения переменных):
```
token=e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
node_id=3983af23-faba-8e30-e09d-3b0cc2bacebe
```
3) Собственно, запустить набор контейнеров:
```
docker compose up --build --detach
```
либо (если Вы по какой-то причине используете устаревший стек docker-compose вместо плагина docker):
```
docker-compose up --build --detach
```

Если у Вас есть вопросы по поводу установки Docker на вашу ОС - можете ознакомиться с [данной статьёй](https://docs.docker.com/engine/install/)

4) Так же, пожалуйста, добавьте в планировщик задач (cron) периодический (чем чаще, тем лучше) запуск скрипта `update.bash` из данного репозитория.
Если у Вас есть вопросы о том, как это сделать - лучше всего, [напишите](https://t.me/dpidetector) в наш чат. Вам обязательно помогут.
